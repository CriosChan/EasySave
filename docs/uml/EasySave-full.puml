@startuml
skinparam classAttributeIconSize 0
set namespaceSeparator .

class "AutoGeneratedProgram" as T0001 {
  + AutoGeneratedProgram()
  - {static} Main(args: string[]): void
}

class "AutoGeneratedProgram" as T0002 {
  + AutoGeneratedProgram()
  - {static} Main(args: string[]): void
}

abstract class "EasyLog.AbstractLogger<T>" as T0003 {
  # AbstractLogger<T>(logDirectory: string, extension: string)
  # WriteLogFile(log: T): void
  # {abstract} Serialize(logs: T): string
  + {abstract} Log(content: T): void
}

class "EasyLog.JsonLogger<T>" as T0004 {
  - {readonly} _options: JsonSerializerOptions
  + JsonLogger<T>(logDirectory: string)
  # Serialize(log: T): string
  + Log(content: T): void
}

class "EasyLogTest.FakeLogObject" as T0005 <<struct>> {
  + Name: string { get; set; }
  + FileSource: string { get; set; }
  + FileTarget: string { get; set; }
  + FileSize: int { get; set; }
  + FileTransferTime: int { get; set; }
  + Time: DateTime { get; set; }
  + FakeLogObject(name: string, fileSource: string, fileTarget: string, fileSize: int, fileTransferTime: int, time: DateTime)
}

class "EasyLogTest.Tests" as T0006 {
  - _logger: AbstractLogger<FakeLogObject>
  + Tests()
  + Setup(): void
  + TestLogCreation(): void
}

interface "EasySave.Application.Abstractions.IBackupDirectoryPreparer" as T0007 {
  + {abstract} EnsureTargetDirectories(job: BackupJob, sourceDir: string, targetDir: string): void
  + {abstract} EnsureTargetDirectoryForFile(job: BackupJob, sourceFile: string, targetFile: string): void
}

interface "EasySave.Application.Abstractions.IBackupFileSelector" as T0008 {
  + {abstract} GetFilesToCopy(job: BackupJob, sourceDir: string, targetDir: string): List<string>
}

interface "EasySave.Application.Abstractions.IBackupService" as T0009 {
  + {abstract} RunJobsSequential(jobs: IEnumerable<BackupJob>): void
  + {abstract} RunJob(job: BackupJob): void
}

interface "EasySave.Application.Abstractions.IFileCopier" as T0010 {
  + {abstract} Copy(sourceFile: string, targetFile: string): long
}

interface "EasySave.Application.Abstractions.IJobRepository" as T0011 {
  + {abstract} Load(): List<BackupJob>
  + {abstract} Save(jobs: List<BackupJob>): void
  + {abstract} AddJob(jobs: List<BackupJob>, job: BackupJob): ValueTuple<bool, string>
  + {abstract} RemoveJob(jobs: List<BackupJob>, idOrName: string): bool
}

interface "EasySave.Application.Abstractions.ILogWriter<T>" as T0012 {
  + {abstract} Log(entry: T): void
}

interface "EasySave.Application.Abstractions.IPathService" as T0013 {
  + {abstract} TryNormalizeExistingDirectory(rawPath: string, out normalizedPath: string): bool
  + {abstract} ToFullUncLikePath(path: string): string
  + {abstract} GetRelativePath(basePath: string, fullPath: string): string
}

interface "EasySave.Application.Abstractions.IStateService" as T0014 {
  + {abstract} Initialize(jobs: IEnumerable<BackupJob>): void
  + {abstract} Update(updated: BackupJobState): void
  + {abstract} GetOrCreate(job: BackupJob): BackupJobState
}

interface "EasySave.Application.Abstractions.IStateSynchronizer" as T0015 {
  + {abstract} Refresh(): void
}

class "EasySave.Application.Services.BackupDirectoryPreparer" as T0016 {
  - {readonly} _logger: ILogWriter<LogEntry>
  - {readonly} _paths: IPathService
  + BackupDirectoryPreparer(logger: ILogWriter<LogEntry>, paths: IPathService)
  + EnsureTargetDirectories(job: BackupJob, sourceDir: string, targetDir: string): void
  + EnsureTargetDirectoryForFile(job: BackupJob, sourceFile: string, targetFile: string): void
}

class "EasySave.Application.Services.BackupFileSelector" as T0017 {
  - {readonly} _paths: IPathService
  + BackupFileSelector(paths: IPathService)
  + GetFilesToCopy(job: BackupJob, sourceDir: string, targetDir: string): List<string>
}

class "EasySave.Application.Services.BackupService" as T0018 {
  - {readonly} _logger: ILogWriter<LogEntry>
  - {readonly} _state: IStateService
  - {readonly} _paths: IPathService
  - {readonly} _fileSelector: IBackupFileSelector
  - {readonly} _directoryPreparer: IBackupDirectoryPreparer
  - {readonly} _fileCopier: IFileCopier
  + BackupService(logger: ILogWriter<LogEntry>, state: IStateService, paths: IPathService, fileSelector: IBackupFileSelector, directoryPreparer: IBackupDirectoryPreparer, fileCopier: IFileCopier)
  + RunJobsSequential(jobs: IEnumerable<BackupJob>): void
  + RunJob(job: BackupJob): void
}

class "EasySave.Application.Services.FileCopier" as T0019 {
  + FileCopier()
  + Copy(sourceFile: string, targetFile: string): long
}

class "EasySave.Application.Services.StateSynchronizer" as T0020 {
  - {readonly} _repository: IJobRepository
  - {readonly} _state: IStateService
  + StateSynchronizer(repository: IJobRepository, state: IStateService)
  + Refresh(): void
}

class "EasySave.Bootstrap.EasySaveApplication" as T0021 {
  + EasySaveApplication()
  + Run(args: string[]): int
  - {static} TryApplyCulture(cultureName: string): void
}

interface "EasySave.Bootstrap.IApplication" as T0022 {
  + {abstract} Run(args: string[]): int
}

class "EasySave.Bootstrap.Program" as T0023 {
  - {static} Main(args: string[]): void
}

class "EasySave.Domain.Models.BackupJob" as T0024 {
  + Id: int { get; set; }
  + Name: string { get; set; }
  + SourceDirectory: string { get; set; }
  + TargetDirectory: string { get; set; }
  + Type: BackupType { get; set; }
  + BackupJob()
}

class "EasySave.Domain.Models.BackupJobState" as T0025 {
  + JobId: int { get; set; }
  + BackupName: string { get; set; }
  + LastActionTimestamp: DateTime { get; set; }
  + State: JobRunState { get; set; }
  + TotalFiles: int { get; set; }
  + TotalSizeBytes: long { get; set; }
  + ProgressPercent: double { get; set; }
  + RemainingFiles: int { get; set; }
  + RemainingSizeBytes: long { get; set; }
  + CurrentSourcePath: string { get; set; }
  + CurrentTargetPath: string { get; set; }
  + CurrentAction: string { get; set; }
  + BackupJobState()
}

enum "EasySave.Domain.Models.BackupType" as T0026 {
  Complete
  Differential
}

enum "EasySave.Domain.Models.JobRunState" as T0027 {
  Inactive
  Active
  Completed
  Failed
}

class "EasySave.Domain.Models.LogEntry" as T0028 {
  + Timestamp: DateTime { get; set; }
  + BackupName: string { get; set; }
  + SourcePath: string { get; set; }
  + TargetPath: string { get; set; }
  + FileSizeBytes: long { get; set; }
  + TransferTimeMs: long { get; set; }
  + LogEntry()
}

class "EasySave.Infrastructure.Configuration.ApplicationConfiguration" as T0029 {
  - {static} _instance: ApplicationConfiguration
  - {static} {readonly} _lock: object
  + {static} Instance: ApplicationConfiguration { get; }
  + LogPath: string { get; set; }
  + JobConfigPath: string { get; set; }
  + Localization: string { get; set; }
  + ApplicationConfiguration()
  - {static} ApplicationConfiguration()
  + {static} Load(configFile: string): void
}

class "EasySave.Infrastructure.Configuration.DataPathResolver" as T0030 {
  - {static} {const} AppFolderName: string
  + {static} ResolveDirectory(configuredPath: string, defaultSubfolder: string): string
  - {static} GetBaseDataDirectory(): string
  - {static} IsSafeAbsolute(path: string): bool
}

class "EasySave.Infrastructure.IO.JsonFile" as T0031 {
  + {static} {readonly} Options: JsonSerializerOptions
  - {static} JsonFile()
  + {static} ReadOrDefault(path: string, defaultValue: T): T
  + {static} WriteAtomic(path: string, value: T): void
}

class "EasySave.Infrastructure.IO.PathService" as T0032 {
  + PathService()
  + TryNormalizeExistingDirectory(rawPath: string, out normalizedPath: string): bool
  + ToFullUncLikePath(path: string): string
  + GetRelativePath(basePath: string, fullPath: string): string
  - {static} NormalizeUserPath(path: string): string
  - {static} StripWrappingQuotes(path: string): string
}

class "EasySave.Infrastructure.Logging.JsonLogWriter<T>" as T0033 {
  - {readonly} _logger: AbstractLogger<T>
  + JsonLogWriter<T>(logDirectory: string)
  + JsonLogWriter<T>(logger: AbstractLogger<T>)
  + Log(entry: T): void
}

class "EasySave.Infrastructure.Persistence.JobRepository" as T0034 {
  - {readonly} _jobsPath: string
  - {static} {const} MaxJobs: int
  + JobRepository(configDirectory: string)
  + Load(): List<BackupJob>
  + Save(jobs: List<BackupJob>): void
  + AddJob(jobs: List<BackupJob>, job: BackupJob): ValueTuple<bool, string>
  + RemoveJob(jobs: List<BackupJob>, idOrName: string): bool
  - {static} GetNextFreeId(jobs: IReadOnlyCollection<BackupJob>): int
}

class "EasySave.Infrastructure.Persistence.StateFileService" as T0035 {
  - {readonly} _statePath: string
  - _states: List<BackupJobState>
  + StateFileService(stateDirectory: string)
  + Initialize(jobs: IEnumerable<BackupJob>): void
  + Update(updated: BackupJobState): void
  + GetOrCreate(job: BackupJob): BackupJobState
}

class "EasySave.Presentation.Cli.CommandController" as T0036 {
  + {static} Run(args: string[], repository: IJobRepository, backupService: IBackupService, stateService: IStateService, paths: IPathService): int
  - {static} PrintUsage(): void
  - {static} ParseArguments(arg: string): List<int>
}

class "EasySave.Presentation.Cli.CommandJobRunner" as T0037 {
  - {readonly} _repository: IJobRepository
  - {readonly} _backupService: IBackupService
  - {readonly} _stateService: IStateService
  - {readonly} _paths: IPathService
  + CommandJobRunner(repository: IJobRepository, backupService: IBackupService, stateService: IStateService, paths: IPathService)
  + RunJobs(ids: IEnumerable<int>): int
  - IsJobRunnable(job: BackupJob, out message: string): bool
}

class "EasySave.Presentation.Cli.CommandLineArgumentParser" as T0038 {
  ~ {static} Parse(arg: string): List<int>
}

class "EasySave.Presentation.Cli.CommandUsagePrinter" as T0039 {
  ~ {static} Print(): void
}

class "EasySave.Presentation.Ui.Console.ConsolePrompter" as T0040 {
  - {readonly} _console: IConsole
  - {readonly} _paths: IPathService
  + ConsolePrompter(console: IConsole, paths: IPathService)
  + ReadNonEmpty(prompt: string): string
  + ReadExistingDirectory(prompt: string, notFoundMessage: string): string
  + ReadBackupType(prompt: string, options: string, invalidInputMessage: string): BackupType
  + Pause(pressAnyKeyMessage: string): void
}

interface "EasySave.Presentation.Ui.Console.IConsole" as T0041 {
  + {abstract} Clear(): void
  + {abstract} Write(value: string): void
  + {abstract} WriteLine(value: string): void
  + {abstract} ReadLine(): string
  + {abstract} ReadKey(intercept: bool): ConsoleKeyInfo
}

class "EasySave.Presentation.Ui.Console.SystemConsole" as T0042 {
  + SystemConsole()
  + Clear(): void
  + Write(value: string): void
  + WriteLine(value: string): void
  + ReadLine(): string
  + ReadKey(intercept: bool): ConsoleKeyInfo
}

class "EasySave.Presentation.Ui.JobCreationView" as T0043 {
  - {readonly} _console: IConsole
  - {readonly} _repository: IJobRepository
  - {readonly} _stateSync: IStateSynchronizer
  - {readonly} _prompter: ConsolePrompter
  - {readonly} _errorTranslator: JobRepositoryErrorTranslator
  + JobCreationView(console: IConsole, repository: IJobRepository, stateSync: IStateSynchronizer, prompter: ConsolePrompter, errorTranslator: JobRepositoryErrorTranslator)
  + Show(): void
}

class "EasySave.Presentation.Ui.JobLaunchView" as T0044 {
  - {readonly} _console: IConsole
  - {readonly} _repository: IJobRepository
  - {readonly} _backupService: IBackupService
  - {readonly} _stateService: IStateService
  - {readonly} _prompter: ConsolePrompter
  - {readonly} _paths: IPathService
  + JobLaunchView(console: IConsole, repository: IJobRepository, backupService: IBackupService, stateService: IStateService, prompter: ConsolePrompter, paths: IPathService)
  + Show(): void
  - RunAll(jobs: List<BackupJob>): void
  - RunOne(job: BackupJob): void
}

class "EasySave.Presentation.Ui.JobListView" as T0045 {
  - {readonly} _console: IConsole
  - {readonly} _repository: IJobRepository
  - {readonly} _prompter: ConsolePrompter
  + JobListView(console: IConsole, repository: IJobRepository, prompter: ConsolePrompter)
  + Show(): void
}

class "EasySave.Presentation.Ui.JobRemovalView" as T0046 {
  - {readonly} _console: IConsole
  - {readonly} _repository: IJobRepository
  - {readonly} _stateSync: IStateSynchronizer
  - {readonly} _prompter: ConsolePrompter
  + JobRemovalView(console: IConsole, repository: IJobRepository, stateSync: IStateSynchronizer, prompter: ConsolePrompter)
  + Show(): void
}

class "EasySave.Presentation.Ui.JobRepositoryErrorTranslator" as T0047 {
  + JobRepositoryErrorTranslator()
  + Translate(errorCode: string): string
}

class "EasySave.Presentation.Ui.ListWidget" as T0048 {
  + {static} ShowList(options: List<Option>): void
  + {static} ShowList(options: List<Option>, console: IConsole): void
  - {static} WriteMenu(console: IConsole, options: List<Option>, selectedOption: Option): void
}

class "EasySave.Presentation.Ui.MainMenuController" as T0049 {
  - {readonly} _console: IConsole
  - {readonly} _jobList: JobListView
  - {readonly} _jobCreation: JobCreationView
  - {readonly} _jobRemoval: JobRemovalView
  - {readonly} _jobLaunch: JobLaunchView
  + MainMenuController(console: IConsole, jobList: JobListView, jobCreation: JobCreationView, jobRemoval: JobRemovalView, jobLaunch: JobLaunchView)
  + Show(): void
}

class "EasySave.Presentation.Ui.Option" as T0050 {
  + Description: string { get; }
  + Selected: Action { get; }
  + Option(description: string, selected: Action)
}

class "EasySave.Presentation.Ui.UserInterface" as T0051 {
  - {static} _menu: MainMenuController
  + {static} Initialize(repository: IJobRepository, backupService: IBackupService, stateService: IStateService, stateSynchronizer: IStateSynchronizer, paths: IPathService): void
  + {static} ShowMenu(): void
  - {static} EnsureInitialized(): void
}

class "EasySaveTest.AppConfigInitTest" as T0052 {
  + AppConfigInitTest()
  + AppConfigThrowExceptionIfInstanceCalledBeforeLoading(): void
}

class "EasySaveTest.AppConfigTest" as T0053 {
  - _appSettings: ApplicationConfiguration
  + AppConfigTest()
  + Setup(): void
  + ConfigIsNotNull(): void
  + ConfigHasJobConfigPath(): void
  + ConfigHasLocalization(): void
  + ConfigHasLogPath(): void
}

class "EasySaveTest.BackupServiceTests" as T0054 {
  - _tempDir: string
  - _sourceDir: string
  - _targetDir: string
  - _stateService: StateFileService
  - _logDir: string
  - _backupService: BackupService
  + BackupServiceTests()
  + Setup(): void
  + TearDown(): void
  + RunJob_CopiesFiles_InCompleteBackup(): void
  + RunJob_CreatesSubdirectories(): void
  + RunJob_HandlesEmptyDirectory(): void
  + RunJob_LogsFileTransfers(): void
  + RunJob_FailsWhenSourceMissing(): void
  + RunJob_PreservesFileTimestamps(): void
  + RunJobsSequential_RunsMultipleJobs_InOrder(): void
  + RunJob_DifferentialBackup_OnlyUpdatesDifferentFiles(): void
}

class "EasySaveTest.CommandControllerTests" as T0055 {
  - _rootDir: string
  - _configDir: string
  - _logDir: string
  - _repo: JobRepository
  - _state: StateFileService
  - _backup: BackupService
  - _paths: PathService
  + CommandControllerTests()
  + Setup(): void
  + TearDown(): void
  - SaveJobs(jobs: BackupJob[]): void
  - RunWithOutput(args: string[]): ValueTuple<int, string>
  - ReadStateFile(): List<BackupJobState>
  - ReadAllLogEntries(): List<LogEntry>
  - {static} CountOccurrences(text: string, value: string): int
  - {static} MakeJob(id: int, name: string, sourceDir: string, targetDir: string, type: BackupType): BackupJob
  + Run_NoArgs_PrintsUsageAndReturns1(): void
  + Run_InvalidArgs_PrintsUsageAndReturns1(): void
  + Run_NoJobsConfigured_Returns1_AndDoesNotCreateStateFile(): void
  + Run_SingleId_RunsJob_UpdatesState_AndWritesLogs(): void
  + Run_Range_RunsAllJobsInIncreasingOrder(): void
  + Run_SemicolonList_RunsOnlySpecifiedJobs(): void
  + Run_DeduplicatesIds_AndDoesNotRunSameJobTwice(): void
  + Run_UnknownJobId_PrintsNotFound_AndKeepsStateInactive(): void
  + Run_SkipsJob_WhenSourceDirectoryIsMissing(): void
  + Run_SupportsSplitArgumentsLikeShellWouldProvide(): void
}

class "EasySaveTest.JobRepositoryTests" as T0056 {
  - _tempDir: string
  - _repo: JobRepository
  + JobRepositoryTests()
  + Setup(): void
  + TearDown(): void
  + Load_EmptyRepository_ReturnsEmptyList(): void
  + Save_PersistsJobsToFile(): void
  + AddJob_AssignsId_WhenSlotAvailable(): void
  + AddJob_AssignsNextAvailableId(): void
  + AddJob_ReturnsError_WhenMaxJobsReached(): void
  + RemoveJob_ById_RemovesJob(): void
  + RemoveJob_ByName_RemovesJob(): void
  + RemoveJob_NonExistent_ReturnsFalse(): void
  + RemoveJob_ByName_CaseInsensitive(): void
}

class "EasySaveTest.StateFileServiceTests" as T0057 {
  - _tempDir: string
  - _stateService: StateFileService
  + StateFileServiceTests()
  + Setup(): void
  + TearDown(): void
  + Initialize_CreatesStateFile(): void
  + Initialize_SetsJobsToInactive(): void
  + GetOrCreate_ReturnsExisting_WhenStateExists(): void
  + GetOrCreate_CreatesNewState_WhenMissing(): void
  + Update_ModifiesState_AndWritesFile(): void
  + Update_OrdersStatesByJobId(): void
}


T0006 "1" o-- "1" T0003 : _logger
T0007 ..> T0024 : EnsureTargetDirectories(job)
T0007 ..> T0024 : EnsureTargetDirectoryForFile(job)
T0008 ..> T0024 : GetFilesToCopy(job)
T0009 ..> T0024 : RunJob(job)
T0009 ..> T0024 : RunJobsSequential(jobs)
T0011 ..> T0024 : AddJob(job)
T0011 ..> T0024 : AddJob(jobs)
T0011 ..> T0024 : Load() returns
T0011 ..> T0024 : RemoveJob(jobs)
T0011 ..> T0024 : Save(jobs)
T0014 ..> T0024 : GetOrCreate(job)
T0014 ..> T0024 : Initialize(jobs)
T0014 ..> T0025 : GetOrCreate() returns
T0014 ..> T0025 : Update(updated)
T0016 ..> T0012 : BackupDirectoryPreparer(logger)
T0016 ..> T0013 : BackupDirectoryPreparer(paths)
T0016 ..> T0024 : EnsureTargetDirectories(job)
T0016 ..> T0024 : EnsureTargetDirectoryForFile(job)
T0016 ..|> T0007
T0016 "1" o-- "1" T0012 : _logger
T0016 "1" o-- "1" T0013 : _paths
T0017 ..> T0013 : BackupFileSelector(paths)
T0017 ..> T0024 : GetFilesToCopy(job)
T0017 ..|> T0008
T0017 "1" o-- "1" T0013 : _paths
T0018 ..> T0007 : BackupService(directoryPreparer)
T0018 ..> T0008 : BackupService(fileSelector)
T0018 ..> T0010 : BackupService(fileCopier)
T0018 ..> T0012 : BackupService(logger)
T0018 ..> T0013 : BackupService(paths)
T0018 ..> T0014 : BackupService(state)
T0018 ..> T0024 : RunJob(job)
T0018 ..> T0024 : RunJobsSequential(jobs)
T0018 ..|> T0009
T0018 "1" o-- "1" T0007 : _directoryPreparer
T0018 "1" o-- "1" T0008 : _fileSelector
T0018 "1" o-- "1" T0010 : _fileCopier
T0018 "1" o-- "1" T0012 : _logger
T0018 "1" o-- "1" T0013 : _paths
T0018 "1" o-- "1" T0014 : _state
T0019 ..|> T0010
T0020 ..> T0011 : StateSynchronizer(repository)
T0020 ..> T0014 : StateSynchronizer(state)
T0020 ..|> T0015
T0020 "1" o-- "1" T0011 : _repository
T0020 "1" o-- "1" T0014 : _state
T0021 ..|> T0022
T0024 "1" o-- "1" T0026 : Type
T0025 "1" o-- "1" T0027 : State
T0026 "1" o-- "1" T0026 : Complete
T0026 "1" o-- "1" T0026 : Differential
T0027 "1" o-- "1" T0027 : Active
T0027 "1" o-- "1" T0027 : Completed
T0027 "1" o-- "1" T0027 : Failed
T0027 "1" o-- "1" T0027 : Inactive
T0029 "1" o-- "0..1" T0029 : _instance
T0029 "1" o-- "1" T0029 : Instance
T0032 ..|> T0013
T0033 ..> T0003 : JsonLogWriter`1(logger)
T0033 "1" o-- "1" T0003 : _logger
T0034 ..> T0024 : AddJob(job)
T0034 ..> T0024 : AddJob(jobs)
T0034 ..> T0024 : GetNextFreeId(jobs)
T0034 ..> T0024 : Load() returns
T0034 ..> T0024 : RemoveJob(jobs)
T0034 ..> T0024 : Save(jobs)
T0034 ..|> T0011
T0035 ..> T0024 : GetOrCreate(job)
T0035 ..> T0024 : Initialize(jobs)
T0035 ..> T0025 : GetOrCreate() returns
T0035 ..> T0025 : Update(updated)
T0035 ..|> T0014
T0035 "1" o-- "0..*" T0025 : _states
T0036 ..> T0009 : Run(backupService)
T0036 ..> T0011 : Run(repository)
T0036 ..> T0013 : Run(paths)
T0036 ..> T0014 : Run(stateService)
T0037 ..> T0009 : CommandJobRunner(backupService)
T0037 ..> T0011 : CommandJobRunner(repository)
T0037 ..> T0013 : CommandJobRunner(paths)
T0037 ..> T0014 : CommandJobRunner(stateService)
T0037 ..> T0024 : IsJobRunnable(job)
T0037 "1" o-- "1" T0009 : _backupService
T0037 "1" o-- "1" T0011 : _repository
T0037 "1" o-- "1" T0013 : _paths
T0037 "1" o-- "1" T0014 : _stateService
T0040 ..> T0013 : ConsolePrompter(paths)
T0040 ..> T0026 : ReadBackupType() returns
T0040 ..> T0041 : ConsolePrompter(console)
T0040 "1" o-- "1" T0013 : _paths
T0040 "1" o-- "1" T0041 : _console
T0042 ..|> T0041
T0043 ..> T0011 : JobCreationView(repository)
T0043 ..> T0015 : JobCreationView(stateSync)
T0043 ..> T0040 : JobCreationView(prompter)
T0043 ..> T0041 : JobCreationView(console)
T0043 ..> T0047 : JobCreationView(errorTranslator)
T0043 "1" o-- "1" T0011 : _repository
T0043 "1" o-- "1" T0015 : _stateSync
T0043 "1" o-- "1" T0040 : _prompter
T0043 "1" o-- "1" T0041 : _console
T0043 "1" o-- "1" T0047 : _errorTranslator
T0044 ..> T0009 : JobLaunchView(backupService)
T0044 ..> T0011 : JobLaunchView(repository)
T0044 ..> T0013 : JobLaunchView(paths)
T0044 ..> T0014 : JobLaunchView(stateService)
T0044 ..> T0024 : RunAll(jobs)
T0044 ..> T0024 : RunOne(job)
T0044 ..> T0040 : JobLaunchView(prompter)
T0044 ..> T0041 : JobLaunchView(console)
T0044 "1" o-- "1" T0009 : _backupService
T0044 "1" o-- "1" T0011 : _repository
T0044 "1" o-- "1" T0013 : _paths
T0044 "1" o-- "1" T0014 : _stateService
T0044 "1" o-- "1" T0040 : _prompter
T0044 "1" o-- "1" T0041 : _console
T0045 ..> T0011 : JobListView(repository)
T0045 ..> T0040 : JobListView(prompter)
T0045 ..> T0041 : JobListView(console)
T0045 "1" o-- "1" T0011 : _repository
T0045 "1" o-- "1" T0040 : _prompter
T0045 "1" o-- "1" T0041 : _console
T0046 ..> T0011 : JobRemovalView(repository)
T0046 ..> T0015 : JobRemovalView(stateSync)
T0046 ..> T0040 : JobRemovalView(prompter)
T0046 ..> T0041 : JobRemovalView(console)
T0046 "1" o-- "1" T0011 : _repository
T0046 "1" o-- "1" T0015 : _stateSync
T0046 "1" o-- "1" T0040 : _prompter
T0046 "1" o-- "1" T0041 : _console
T0048 ..> T0041 : ShowList(console)
T0048 ..> T0041 : WriteMenu(console)
T0048 ..> T0050 : ShowList(options)
T0048 ..> T0050 : WriteMenu(options)
T0048 ..> T0050 : WriteMenu(selectedOption)
T0049 ..> T0041 : MainMenuController(console)
T0049 ..> T0043 : MainMenuController(jobCreation)
T0049 ..> T0044 : MainMenuController(jobLaunch)
T0049 ..> T0045 : MainMenuController(jobList)
T0049 ..> T0046 : MainMenuController(jobRemoval)
T0049 "1" o-- "1" T0041 : _console
T0049 "1" o-- "1" T0043 : _jobCreation
T0049 "1" o-- "1" T0044 : _jobLaunch
T0049 "1" o-- "1" T0045 : _jobList
T0049 "1" o-- "1" T0046 : _jobRemoval
T0051 ..> T0009 : Initialize(backupService)
T0051 ..> T0011 : Initialize(repository)
T0051 ..> T0013 : Initialize(paths)
T0051 ..> T0014 : Initialize(stateService)
T0051 ..> T0015 : Initialize(stateSynchronizer)
T0051 "1" o-- "0..1" T0049 : _menu
T0053 "1" o-- "1" T0029 : _appSettings
T0054 "1" o-- "1" T0018 : _backupService
T0054 "1" o-- "1" T0035 : _stateService
T0055 ..> T0024 : MakeJob() returns
T0055 ..> T0024 : SaveJobs(jobs)
T0055 ..> T0025 : ReadStateFile() returns
T0055 ..> T0026 : MakeJob(type)
T0055 ..> T0028 : ReadAllLogEntries() returns
T0055 "1" o-- "1" T0018 : _backup
T0055 "1" o-- "1" T0032 : _paths
T0055 "1" o-- "1" T0034 : _repo
T0055 "1" o-- "1" T0035 : _state
T0056 "1" o-- "1" T0034 : _repo
T0057 "1" o-- "1" T0035 : _stateService

@enduml
